name: Update version

on:
  workflow_dispatch:
    inputs:
      version:
        description: 'Add new version'
        required: true

jobs:
  version:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3

    - name: Update version
      working-directory: ./
      run: |
        sed -i '14d' orbita.php
        sed -i '14i \ * Version:         ${{ github.event.inputs.version }}' orbita.php
        sed -i '43d' orbita.php
        sed -i "43i define( 'ORBITA_VERSION', '${{ github.event.inputs.version }}' );" orbita.php
        git config user.name 'update-version-action'
        git config user.email '<>'
        git add .
        git commit -m 'Atualiza para a vers√£o ${{ github.event.inputs.version }}'

    - name: Push
      uses: ad-m/github-push-action@master
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
        force: true
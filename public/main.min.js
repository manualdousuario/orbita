/*! orbita-manual 29-01-2026 */
async function upVote(t,e){var o=orbitaApi.restURL+"orbitaApi/v1/likes";const a=new URLSearchParams;a.append("post_id",t);var r={"Content-Type":"application/x-www-form-urlencoded","X-WP-Nonce":orbitaApi.restNonce};try{const s=await fetch(o,{method:"POST",headers:r,body:a.toString()});if(!s.ok)throw new Error("HTTP error! status: "+s.status);var n=await s.json();if(n.success){const l=document.querySelector(`[data-votes-post-id='${t}']`);l.innerHTML=n.count,e.classList.add("orbita-vote-already-voted"),e.classList.remove("orbita-vote-can-vote")}}catch(t){throw new Error("Erro ao enviar voto:",t)}}function verifyPostAttachFilesize(){const t=document.getElementById("orbita_post_attach");0<t.files.length&&10<t.files[0].size/1048576&&(t.value="",alert("O arquivo Ã© maior que 10 MB"))}function toggleAttachUrl(){verifyPostAttachFilesize(),""!==postUrlInput.value&&(postAttachDiv.style.display="none",postUrlDiv.style.display="block"),""!==postAttachInput.value&&(postUrlDiv.style.display="none",postAttachDiv.style.display="block"),""==postAttachInput.value&&""==postUrlInput.value&&(postUrlDiv.style.display="block",postAttachDiv.style.display="block")}document.addEventListener("DOMContentLoaded",function(){const t=document.querySelector(".orbita-post-title-textarea"),e=(t&&t.addEventListener("keyup",t=>{var e=t.target.offsetWidth/10;t.target.rows=Math.round(t.target.value.length/e)+1}),document.querySelectorAll(".orbita-vote-can-vote"));e.forEach(function(e){e.addEventListener("click",function(t){return upVote(e.dataset.postId,e),t.preventDefault(),!1})})},!1);let postUrlInput=document.getElementById("orbita_post_url"),postAttachInput=document.getElementById("orbita_post_attach");const postUrlDiv=document.getElementById("orbita-form-post_url"),postAttachDiv=document.getElementById("orbita-form-post_attach");postUrlInput&&postAttachInput&&(toggleAttachUrl(postUrlInput),toggleAttachUrl(postAttachInput),postUrlInput.addEventListener("input",toggleAttachUrl),postAttachInput.addEventListener("input",toggleAttachUrl));
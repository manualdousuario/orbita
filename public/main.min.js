/*! orbita 20-01-2023 */
function upVote(o,r){const n=new XMLHttpRequest;n.open("POST",orbitaApi.restURL+"orbitaApi/v1/likes",!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.setRequestHeader("X-WP-Nonce",orbitaApi.restNonce),n.send("post_id="+o),n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){var e=n.responseText,e=JSON.parse(e);if(e.success){const t=document.querySelector("[data-votes-post-id='"+o+"']");t.innerHTML=e.count,r.classList.add("orbita-vote-already-voted"),r.classList.remove("orbita-vote-can-vote")}}}}function report(e,t,o){const r=new XMLHttpRequest;r.open("POST",orbitaApi.restURL+"orbitaApi/v1/report",!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.setRequestHeader("X-WP-Nonce",orbitaApi.restNonce),r.send("comment_id="+e+"&post_id="+t)}document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".orbita-post-title-textarea"),t=(e&&e.addEventListener("keyup",e=>{var t=e.target.offsetWidth/10;e.target.rows=Math.round(e.target.value.length/t)+1}),document.querySelectorAll(".orbita-vote-can-vote")),o=(t.forEach(function(t){t.addEventListener("click",function(e){return upVote(t.dataset.postId,t),e.preventDefault,!1})}),document.querySelectorAll(".orbita-report-link"));o.forEach(function(t){t.addEventListener("click",function(e){return report(t.dataset.commentId,t.dataset.postId,t),t.classList.add("orbita-report-link-already-reported"),t.innerHTML="Ok! Obrigado.",t.disabled=!0,e.preventDefault,!1})})},!1);